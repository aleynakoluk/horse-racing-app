{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nconst LOCAL_STORAGE_KEY = 'horse-racing-game';\nexport default new Vuex.Store({\n  state: {\n    horses: [],\n    raceSchedule: []\n  },\n  mutations: {\n    setHorses(state, horses) {\n      state.horses = horses;\n    },\n    setRaceSchedule(state, schedule) {\n      state.raceSchedule = schedule;\n    },\n    updateHorsePosition(state, {\n      horseId,\n      position\n    }) {\n      const horse = state.horses.find(h => h.id === horseId);\n      if (horse) {\n        horse.position = position;\n      }\n    },\n    resetHorsePositions(state) {\n      state.horses.forEach(horse => {\n        horse.position = 0;\n      });\n    }\n  },\n  actions: {\n    async generateHorses({\n      commit\n    }) {\n      let storedHorses = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n      if (!storedHorses) {\n        storedHorses = generateHorses();\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storedHorses));\n      }\n      commit('setHorses', storedHorses);\n      const schedule = generateRaceSchedule(storedHorses);\n      commit('setRaceSchedule', schedule);\n    },\n    async startRace({\n      commit,\n      state\n    }) {\n      commit('resetHorsePositions'); // Atların pozisyonlarını sıfırla\n      const schedule = generateRaceSchedule(state.horses);\n      commit('setRaceSchedule', schedule);\n      await new Promise(resolve => {\n        schedule.forEach((race, index) => {\n          setTimeout(() => {\n            race.horses.forEach(horse => {\n              const newPosition = horse.position + Math.random() * 10;\n              commit('updateHorsePosition', {\n                horseId: horse.id,\n                position: newPosition\n              });\n            });\n            if (index === schedule.length - 1) {\n              resolve(); // Yarışlar tamamlandığında promise'ı resolve et\n            }\n          }, index * 5000);\n        });\n      });\n      setTimeout(() => {\n        commit('resetHorsePositions'); // Atların yeniden başa dönmesi için pozisyonları sıfırla\n      }, schedule.length * 5000); // Yarışların tamamının bitmesini bekleyip atları sıfırla\n    }\n  },\n  plugins: [store => {\n    // Vue uygulaması yeniden başladığında (refresh edildiğinde) store'un state'ini sıfırla\n    window.addEventListener('beforeunload', () => {\n      store.commit('resetHorsePositions');\n    });\n  }]\n});\nfunction generateHorses() {\n  const horses = [];\n  for (let i = 1; i <= 20; i++) {\n    horses.push({\n      id: i,\n      color: getRandomColor(),\n      condition: Math.floor(Math.random() * 100) + 1,\n      position: 0,\n      image: require(`@/assets/horse${i}.png`)\n    });\n  }\n  return horses;\n}\nfunction getRandomColor() {\n  const letters = '0123456789ABCDEF';\n  let color = '#';\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n}\nfunction generateRaceSchedule(horses) {\n  const distances = [1200, 1400, 1600, 1800, 2000, 2200];\n  const schedule = distances.map(distance => {\n    const selectedHorses = [];\n    const horseIds = new Set();\n    for (let i = 1; i <= 10; i++) {\n      let horse;\n      do {\n        horse = horses[Math.floor(Math.random() * horses.length)];\n      } while (horseIds.has(horse.id));\n      selectedHorses.push(horse);\n      horseIds.add(horse.id);\n    }\n    return {\n      distance,\n      horses: selectedHorses\n    };\n  });\n  return schedule;\n}","map":{"version":3,"names":["Vue","Vuex","use","LOCAL_STORAGE_KEY","Store","state","horses","raceSchedule","mutations","setHorses","setRaceSchedule","schedule","updateHorsePosition","horseId","position","horse","find","h","id","resetHorsePositions","forEach","actions","generateHorses","commit","storedHorses","JSON","parse","localStorage","getItem","setItem","stringify","generateRaceSchedule","startRace","Promise","resolve","race","index","setTimeout","newPosition","Math","random","length","plugins","store","window","addEventListener","i","push","color","getRandomColor","condition","floor","image","require","letters","distances","map","distance","selectedHorses","horseIds","Set","has","add"],"sources":["/Users/aleynakoluk/Desktop/horse-racing-game/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\n\nVue.use(Vuex);\n\nconst LOCAL_STORAGE_KEY = 'horse-racing-game';\n\nexport default new Vuex.Store({\n  state: {\n    horses: [],\n    raceSchedule: [],\n  },\n  mutations: {\n    setHorses(state, horses) {\n      state.horses = horses;\n    },\n    setRaceSchedule(state, schedule) {\n      state.raceSchedule = schedule;\n    },\n    updateHorsePosition(state, { horseId, position }) {\n      const horse = state.horses.find(h => h.id === horseId);\n      if (horse) {\n        horse.position = position;\n      }\n    },\n    resetHorsePositions(state) {\n      state.horses.forEach(horse => {\n        horse.position = 0;\n      });\n    },\n  },\n  actions: {\n    async generateHorses({ commit }) {\n      let storedHorses = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n      if (!storedHorses) {\n        storedHorses = generateHorses();\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storedHorses));\n      }\n      commit('setHorses', storedHorses);\n      const schedule = generateRaceSchedule(storedHorses);\n      commit('setRaceSchedule', schedule);\n    },\n\n    async startRace({ commit, state }) {\n      commit('resetHorsePositions'); // Atların pozisyonlarını sıfırla\n      const schedule = generateRaceSchedule(state.horses);\n      commit('setRaceSchedule', schedule);\n\n      await new Promise(resolve => {\n        schedule.forEach((race, index) => {\n          setTimeout(() => {\n            race.horses.forEach(horse => {\n              const newPosition = horse.position + Math.random() * 10;\n              commit('updateHorsePosition', { horseId: horse.id, position: newPosition });\n            });\n            if (index === schedule.length - 1) {\n              resolve(); // Yarışlar tamamlandığında promise'ı resolve et\n            }\n          }, index * 5000);\n        });\n      });\n\n      setTimeout(() => {\n        commit('resetHorsePositions'); // Atların yeniden başa dönmesi için pozisyonları sıfırla\n      }, schedule.length * 5000); // Yarışların tamamının bitmesini bekleyip atları sıfırla\n    },\n  },\n  plugins: [\n    store => {\n      // Vue uygulaması yeniden başladığında (refresh edildiğinde) store'un state'ini sıfırla\n      window.addEventListener('beforeunload', () => {\n        store.commit('resetHorsePositions');\n      });\n    },\n  ],\n});\n\nfunction generateHorses() {\n  const horses = [];\n  for (let i = 1; i <= 20; i++) {\n    horses.push({\n      id: i,\n      color: getRandomColor(),\n      condition: Math.floor(Math.random() * 100) + 1,\n      position: 0,\n      image: require(`@/assets/horse${i}.png`),\n    });\n  }\n  return horses;\n}\n\nfunction getRandomColor() {\n  const letters = '0123456789ABCDEF';\n  let color = '#';\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n}\n\nfunction generateRaceSchedule(horses) {\n  const distances = [1200, 1400, 1600, 1800, 2000, 2200];\n  const schedule = distances.map(distance => {\n    const selectedHorses = [];\n    const horseIds = new Set();\n\n    for (let i = 1; i <= 10; i++) {\n      let horse;\n      do {\n        horse = horses[Math.floor(Math.random() * horses.length)];\n      } while (horseIds.has(horse.id));\n      selectedHorses.push(horse);\n      horseIds.add(horse.id);\n    }\n\n    return {\n      distance,\n      horses: selectedHorses,\n    };\n  });\n  return schedule;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}